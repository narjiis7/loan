<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment</title>

    <script src="https://cdn.marmot-cloud.com/npm/hylid-bridge/2.10.0/index.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
</head>

<body class="bg-gray-100">

    <div class="h-16 w-full bg-green-600 flex items-center px-4 fixed top-0">
        <h1 class="text-xl text-white font-bold">Payment</h1>
    </div>

    <div class="pt-24 flex flex-col items-center gap-6">

        <p class="text-gray-700">
            Ready to complete your payment
        </p>

        <button
            class="bg-green-500 text-white px-8 py-3 rounded-md"
            onclick="payNow()">
            Pay Now
        </button>

    </div>

    <script>
        const tradeNO = localStorage.getItem('tradeNO');

        if (!tradeNO) {
            my.alert({ content: 'No payment order found' });
        }

        function payNow() {
            my.tradePay({
                tradeNO: tradeNO,
                success: (res) => {
                    if (res.resultCode === '9000') {
                        my.alert({ content: 'Payment Successful ðŸŽ‰' });
                    } else {
                        my.alert({ content: 'Payment Failed âŒ' });
                    }
                },
                fail: () => {
                    my.alert({ content: 'Payment Error' });
                }
            });
        }
    </script>

</body>
</html>
